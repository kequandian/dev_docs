# 开发从表单业开始
实体表单管理功能是构成较大的业务系统的业务单元，但要做好表单开发并不容易, 在业务层面需要关注细节。

## 数据库表设计

表单开发先从设计实体数据库表的细节中认真思考, 最低限度地减少复工成本。 

### 首先，对实体表，需从业务的角度，逐一考虑是否需要以下字段

| **Field Name**     | **Description**                                        |  是否需要  |
| ------------------ | ------------------------------------------------------ | --------- |
| id                 | **固定必要字段**                                      |           |
| name               | **实体固定必要字段** 考虑如果是实体， 即是必要的       |           |
| status             | **实体状态必要字段**, 是否需要有状态转移              |           |
| org_id             | **主表固定必要字段** 租户组织id, 用于SaaS资源隔离      |           |
| code               | **实体编号必要字段** (唯一字段)，常用于编号管理，如部门,会议室等     |           |
| category_id        | **分类固定必要字段** 所属分类，考虑实体是否需要分类管理 |           |
| pid                | **多层级固定必要字段** 实体本身所属父类， 考虑是否是多层级实体(如部门） |           |
| version            | 版本控制 myBatis保留字段, 用于保证多用户同时对实体修改   |           |
| create_time        | 实体创建时间，需考虑实体是否需要记录创建时间             |           |
| update_time        | 实体更新时间，需考虑实体是否需要记录更新时间             |           |
| sort_num           | 排序字段，考虑实体是否需要自定义排序                    |           |
| invalid            | 无效字段，实体是否需要有效控制(可由status控制)          |           |

#### 对实体每一个字段，需要考虑**是否必填**（如果必填，字段定义为 not null）, 是否唯一（唯一字段为 unique)，是否组合键唯一，是否有默认值。

### 数据库设计思考清楚并进行过review，并后确定 approved之后，可以通过工具生成代。
> 5分钟内即可完成CRUD代码的编写，说明即便一个简单的表单业务，写代码占用的时间比重是很小的。生成完代码，又重新回到表单的业务分析上面。

## 表单设计
> 业务 主要分为 列表和表单（新建，查看，编辑），二者从业务层面考虑有不同的责任 。

### 列表业务
> 列表着重展示关键业务数据（用户不关心的关联id字段无需显示），重要操作直接在列表中提供（如 与状态转移相关）
>
> 务即实体的列表查询，实体项的 编辑/删除 操作（以及其他自定义的 操作） 实体新建等。 实休列表与实体新建与编辑有不同的业务表达。

## 实体列表与实体编辑的区别
- 列表着重关注 关键信息  其他联表信息（如关联表其他字段信息，如用户的部门名称）， 统计信息(如部门的总人数)
- 列表首重实体项操作, 如查看，编辑，删除， 业务操作如状态转移
- 列表首重实体项批量操作,如批量删除，批量提交

### 表单业务
> 着重展示除列表信息外其他的详细信息，重要的字段变更不能出现在编辑表单中，如状态转换, 财务数据变更等。

> 中的新建表单与编辑表单大部分内容相同，但又有很多值得要考虑的地方，如创建时间新建表单是没有的，但编辑表单是可见而不可编辑的。 

#### 实体列表与实体编辑的区别
- 表单着重展示除列表信息外其他的详细信息，重要的字段变更不能出现在编辑表单中，如状态转换, 财务数据变更等。
- 表单负责子项实体列表的显示以及对子项的CRUD操作
- 表单负责除实体本身的字段信息外的 其他关联实体信息  审批信息  活动信息  统计信息等
